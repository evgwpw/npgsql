Microsoft Windows [Version 10.0.17134.765]
(c) Корпорация Майкрософт (Microsoft Corporation), 2018. Все права защищены.

C:\Temp\pg>md p1

C:\Temp\pg>dir
 Том в устройстве C имеет метку Windows
 Серийный номер тома: 06AE-D681

 Содержимое папки C:\Temp\pg

11.07.2019  17:52    <DIR>          .
11.07.2019  17:52    <DIR>          ..
11.07.2019  17:52    <DIR>          p1
               0 файлов              0 байт
               3 папок  92 466 663 424 байт свободно

C:\Temp\pg>cd p1

C:\Temp\pg\p1>dotnet.exe ef dbcontext scaffold "Host=10.2.4.138;Port=5432;Database=postgres;Username=postgres;Password=postgres" Npgsql.EntityFrameworkCore.PostgreSQL -o Models -c EfDbContext -f
No project was found. Change the current working directory or use the --project option.

C:\Temp\pg\p1>dotnet new console
Подготовка...
Шаблон "Console Application" успешно создан.

Обработка действий после создания...
Выполнение команды dotnet restore для C:\Temp\pg\p1\p1.csproj...
  Идет восстановление пакетов для C:\Temp\pg\p1\p1.csproj...
  Идет создание файла MSBuild C:\Temp\pg\p1\obj\p1.csproj.nuget.g.props.
  Идет создание файла MSBuild C:\Temp\pg\p1\obj\p1.csproj.nuget.g.targets.
  Восстановление завершено в 289,4 ms для C:\Temp\pg\p1\p1.csproj.

Восстановление выполнено.


C:\Temp\pg\p1>dotnet.exe ef dbcontext scaffold "Host=10.2.4.138;Port=5432;Database=postgres;Username=postgres;Password=postgres" Npgsql.EntityFrameworkCore.PostgreSQL -o Models -c EfDbContext -f
Your startup project 'p1' doesn't reference Microsoft.EntityFrameworkCore.Design. This package is required for the Entity Framework Core Tools to work. Ensure your startup project is correct, install the package, and try again.

C:\Temp\pg\p1>dotnet add package Microsoft.EntityFrameworkCore.Design
  Writing C:\Users\veprikov\AppData\Local\Temp\tmp8B84.tmp
info : Добавление PackageReference для пакета "Microsoft.EntityFrameworkCore.Design" в проект "C:\Temp\pg\p1\p1.csproj".
log  : Идет восстановление пакетов для C:\Temp\pg\p1\p1.csproj...
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.design/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.design/index.json 514 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.design/2.2.6/microsoft.entityframeworkcore.design.2.2.6.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.design/2.2.6/microsoft.entityframeworkcore.design.2.2.6.nupkg 34 мс
log  : Идет установка Microsoft.EntityFrameworkCore.Design 2.2.6.
info : Пакет "Microsoft.EntityFrameworkCore.Design" совместим со всеми указанными платформами в проекте "C:\Temp\pg\p1\p1.csproj".
info : Ссылка PackageReference для пакета "Microsoft.EntityFrameworkCore.Design" версии "2.2.6" добавлена в файл "C:\Temp\pg\p1\p1.csproj".
info : Фиксация восстановления...
log  : Идет создание файла MSBuild C:\Temp\pg\p1\obj\p1.csproj.nuget.g.props.
info : Запись файла блокировки на диск. Путь: C:\Temp\pg\p1\obj\project.assets.json
log  : Восстановление завершено в 2,3 sec для C:\Temp\pg\p1\p1.csproj.

C:\Temp\pg\p1>dotnet.exe ef dbcontext scaffold "Host=10.2.4.138;Port=5432;Database=postgres;Username=postgres;Password=postgres" Npgsql.EntityFrameworkCore.PostgreSQL -o Models -c EfDbContext -f
Unable to find provider assembly with name Npgsql.EntityFrameworkCore.PostgreSQL. Ensure the specified name is correct and is referenced by the project.

C:\Temp\pg\p1>dotnet add package Npgsql.EntityFrameworkCore.PostgreSQL
  Writing C:\Users\veprikov\AppData\Local\Temp\tmp53D5.tmp
info : Добавление PackageReference для пакета "Npgsql.EntityFrameworkCore.PostgreSQL" в проект "C:\Temp\pg\p1\p1.csproj".
log  : Идет восстановление пакетов для C:\Temp\pg\p1\p1.csproj...
info :   GET https://api.nuget.org/v3-flatcontainer/npgsql.entityframeworkcore.postgresql/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/npgsql.entityframeworkcore.postgresql/index.json 774 мс
info :   GET https://api.nuget.org/v3-flatcontainer/npgsql.entityframeworkcore.postgresql/2.2.4/npgsql.entityframeworkcore.postgresql.2.2.4.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/npgsql.entityframeworkcore.postgresql/2.2.4/npgsql.entityframeworkcore.postgresql.2.2.4.nupkg 33 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.abstractions/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.relational/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/npgsql/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore/index.json 514 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore/2.2.4/microsoft.entityframeworkcore.2.2.4.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore/2.2.4/microsoft.entityframeworkcore.2.2.4.nupkg 32 мс
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.abstractions/index.json 584 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.abstractions/2.2.4/microsoft.entityframeworkcore.abstractions.2.2.4.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.relational/index.json 603 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.relational/2.2.4/microsoft.entityframeworkcore.relational.2.2.4.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.abstractions/2.2.4/microsoft.entityframeworkcore.abstractions.2.2.4.nupkg 46 мс
info :   OK https://api.nuget.org/v3-flatcontainer/npgsql/index.json 633 мс
info :   GET https://api.nuget.org/v3-flatcontainer/npgsql/4.0.7/npgsql.4.0.7.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.relational/2.2.4/microsoft.entityframeworkcore.relational.2.2.4.nupkg 38 мс
info :   OK https://api.nuget.org/v3-flatcontainer/npgsql/4.0.7/npgsql.4.0.7.nupkg 35 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.analyzers/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.analyzers/index.json 149 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.analyzers/2.2.4/microsoft.entityframeworkcore.analyzers.2.2.4.nupkg
info :   GET https://api.nuget.org/v3-flatcontainer/system.memory/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.analyzers/2.2.4/microsoft.entityframeworkcore.analyzers.2.2.4.nupkg 34 мс
info :   OK https://api.nuget.org/v3-flatcontainer/system.memory/index.json 519 мс
info :   GET https://api.nuget.org/v3-flatcontainer/system.memory/4.5.3/system.memory.4.5.3.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/system.memory/4.5.3/system.memory.4.5.3.nupkg 40 мс
log  : Идет установка System.Memory 4.5.3.
log  : Идет установка Microsoft.EntityFrameworkCore.Analyzers 2.2.4.
log  : Идет установка Npgsql 4.0.7.
log  : Идет установка Microsoft.EntityFrameworkCore 2.2.4.
log  : Идет установка Microsoft.EntityFrameworkCore.Relational 2.2.4.
log  : Идет установка Microsoft.EntityFrameworkCore.Abstractions 2.2.4.
log  : Идет установка Npgsql.EntityFrameworkCore.PostgreSQL 2.2.4.
info : Пакет "Npgsql.EntityFrameworkCore.PostgreSQL" совместим со всеми указанными платформами в проекте "C:\Temp\pg\p1\p1.csproj".
info : Ссылка PackageReference для пакета "Npgsql.EntityFrameworkCore.PostgreSQL" версии "2.2.4" добавлена в файл "C:\Temp\pg\p1\p1.csproj".
info : Фиксация восстановления...
info : Запись файла блокировки на диск. Путь: C:\Temp\pg\p1\obj\project.assets.json
log  : Восстановление завершено в 3,35 sec для C:\Temp\pg\p1\p1.csproj.

C:\Temp\pg\p1>dotnet.exe ef dbcontext scaffold "Host=10.2.4.138;Port=5432;Database=postgres;Username=postgres;Password=postgres" Npgsql.EntityFrameworkCore.PostgreSQL -o Models -c EfDbContext -f
Npgsql.PostgresException (0x80004005): 28P01: пользователь "postgres" не прошёл проверку подлинности (по паролю)
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1003
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.AuthenticateMD5(String username, Byte[] salt, Boolean async) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.Auth.cs:line 132
   at Npgsql.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.Auth.cs:line 38
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 425
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 301
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Npgsql.EntityFrameworkCore.PostgreSQL.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(DbConnection dbConnection, IEnumerable`1 tables, IEnumerable`1 schemas) in C:\projects\npgsql-entityframeworkcore-postgresql\src\EFCore.PG\Scaffolding\Internal\NpgsqlDatabaseModelFactory.cs:line 102
   at Npgsql.EntityFrameworkCore.PostgreSQL.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas) in C:\projects\npgsql-entityframeworkcore-postgresql\src\EFCore.PG\Scaffolding\Internal\NpgsqlDatabaseModelFactory.cs:line 86
   at Microsoft.EntityFrameworkCore.Scaffolding.Internal.ReverseEngineerScaffolder.ScaffoldModel(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas, String namespace, String language, String contextDir, String contextName, ModelReverseEngineerOptions modelOptions, ModelCodeGenerationOptions codeOptions)
   at Microsoft.EntityFrameworkCore.Design.Internal.DatabaseOperations.ScaffoldContext(String provider, String connectionString, String outputDir, String outputContextDir, String dbContextClassName, IEnumerable`1 schemas, IEnumerable`1 tables, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContextImpl(String provider, String connectionString, String outputDir, String outputDbContextDir, String dbContextClassName, IEnumerable`1 schemaFilters, IEnumerable`1 tableFilters, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContext.<>c__DisplayClass0_1.<.ctor>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.<>c__DisplayClass3_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.Execute(Action action)
28P01: пользователь "postgres" не прошёл проверку подлинности (по паролю)

C:\Temp\pg\p1>dotnet.exe ef dbcontext scaffold "Host=10.2.4.138;Port=5432;Database=postgres;Username=postgres;Password=p1" Npgsql.EntityFrameworkCore.PostgreSQL -o Models -c EfDbContext -f
Npgsql.PostgresException (0x80004005): 28P01: пользователь "postgres" не прошёл проверку подлинности (по паролю)
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1003
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.AuthenticateMD5(String username, Byte[] salt, Boolean async) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.Auth.cs:line 132
   at Npgsql.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.Auth.cs:line 38
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 425
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 301
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Npgsql.EntityFrameworkCore.PostgreSQL.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(DbConnection dbConnection, IEnumerable`1 tables, IEnumerable`1 schemas) in C:\projects\npgsql-entityframeworkcore-postgresql\src\EFCore.PG\Scaffolding\Internal\NpgsqlDatabaseModelFactory.cs:line 102
   at Npgsql.EntityFrameworkCore.PostgreSQL.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas) in C:\projects\npgsql-entityframeworkcore-postgresql\src\EFCore.PG\Scaffolding\Internal\NpgsqlDatabaseModelFactory.cs:line 86
   at Microsoft.EntityFrameworkCore.Scaffolding.Internal.ReverseEngineerScaffolder.ScaffoldModel(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas, String namespace, String language, String contextDir, String contextName, ModelReverseEngineerOptions modelOptions, ModelCodeGenerationOptions codeOptions)
   at Microsoft.EntityFrameworkCore.Design.Internal.DatabaseOperations.ScaffoldContext(String provider, String connectionString, String outputDir, String outputContextDir, String dbContextClassName, IEnumerable`1 schemas, IEnumerable`1 tables, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContextImpl(String provider, String connectionString, String outputDir, String outputDbContextDir, String dbContextClassName, IEnumerable`1 schemaFilters, IEnumerable`1 tableFilters, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContext.<>c__DisplayClass0_1.<.ctor>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.<>c__DisplayClass3_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.Execute(Action action)
28P01: пользователь "postgres" не прошёл проверку подлинности (по паролю)

C:\Temp\pg\p1>dotnet.exe ef dbcontext scaffold "Host=10.2.4.138;Port=5432;Database=postgres;Username=ev;Password=ev" Npgsql.EntityFrameworkCore.PostgreSQL -o Models -c EfDbContext -f
System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(ReadOnlySpan`1 str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(ReadOnlySpan`1 s, NumberStyles style, NumberFormatInfo info)
   at System.Version.TryParseComponent(ReadOnlySpan`1 component, String componentName, Boolean throwOnFailure, Int32& parsedComponent)
   at System.Version.ParseVersion(ReadOnlySpan`1 input, Boolean throwOnFailure)
   at System.Version.Parse(String input)
   at System.Version..ctor(String version)
   at Npgsql.NpgsqlDatabaseInfo.ParseServerVersion(String value) in C:\projects\npgsql\src\Npgsql\NpgsqlDatabaseInfo.cs:line 230
   at Npgsql.PostgresDatabaseInfo.LoadPostgresInfo(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async) in C:\projects\npgsql\src\Npgsql\PostgresDatabaseInfo.cs:line 102
   at Npgsql.PostgresDatabaseInfoFactory.Load(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async) in C:\projects\npgsql\src\Npgsql\PostgresDatabaseInfo.cs:line 49
   at Npgsql.NpgsqlDatabaseInfo.Load(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async) in C:\projects\npgsql\src\Npgsql\NpgsqlDatabaseInfo.cs:line 251
   at Npgsql.NpgsqlConnector.LoadDatabaseInfo(NpgsqlTimeout timeout, Boolean async) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 466
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 438
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 301
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Npgsql.EntityFrameworkCore.PostgreSQL.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(DbConnection dbConnection, IEnumerable`1 tables, IEnumerable`1 schemas) in C:\projects\npgsql-entityframeworkcore-postgresql\src\EFCore.PG\Scaffolding\Internal\NpgsqlDatabaseModelFactory.cs:line 102
   at Npgsql.EntityFrameworkCore.PostgreSQL.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas) in C:\projects\npgsql-entityframeworkcore-postgresql\src\EFCore.PG\Scaffolding\Internal\NpgsqlDatabaseModelFactory.cs:line 86
   at Microsoft.EntityFrameworkCore.Scaffolding.Internal.ReverseEngineerScaffolder.ScaffoldModel(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas, String namespace, String language, String contextDir, String contextName, ModelReverseEngineerOptions modelOptions, ModelCodeGenerationOptions codeOptions)
   at Microsoft.EntityFrameworkCore.Design.Internal.DatabaseOperations.ScaffoldContext(String provider, String connectionString, String outputDir, String outputContextDir, String dbContextClassName, IEnumerable`1 schemas, IEnumerable`1 tables, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContextImpl(String provider, String connectionString, String outputDir, String outputDbContextDir, String dbContextClassName, IEnumerable`1 schemaFilters, IEnumerable`1 tableFilters, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContext.<>c__DisplayClass0_1.<.ctor>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.<>c__DisplayClass3_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.Execute(Action action)
Input string was not in a correct format.

C:\Temp\pg\p1>dotnet add remove Npgsql.EntityFrameworkCore.PostgreSQL
Обязательная команда не указана.
Использование: dotnet add [параметры] <PROJECT> [команда]

Аргументы:
  <PROJECT>   Обрабатываемый файл проекта. Если файл не указан, команда будет искать его в текущем каталоге.

Параметры:
  -h, --help   Показать справку командной строки.

Команды:
  package <PACKAGE_NAME>     Добавление в проект ссылки на пакет NuGet.
  reference <PROJECT_PATH>   Добавление в проект ссылки из одного проекта на другой.

C:\Temp\pg\p1>dotnet remove package Npgsql.EntityFrameworkCore.PostgreSQL
info : Удаление PackageReference для пакета "Npgsql.EntityFrameworkCore.PostgreSQL" из проекта "C:\Temp\pg\p1\p1.csproj".

C:\Temp\pg\p1>dotnet add package Npgsql.EntityFrameworkCore.PostgreSQL --version 2.0.2
  Writing C:\Users\veprikov\AppData\Local\Temp\tmp2376.tmp
info : Добавление PackageReference для пакета "Npgsql.EntityFrameworkCore.PostgreSQL" в проект "C:\Temp\pg\p1\p1.csproj".
log  : Идет восстановление пакетов для C:\Temp\pg\p1\p1.csproj...
info :   CACHE https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore/2.0.2/microsoft.entityframeworkcore.2.0.2.nupkg
info :   CACHE https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.relational/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.relational/2.0.2/microsoft.entityframeworkcore.relational.2.0.2.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore.relational/2.0.2/microsoft.entityframeworkcore.relational.2.0.2.nupkg 270 мс
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.entityframeworkcore/2.0.2/microsoft.entityframeworkcore.2.0.2.nupkg 392 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.configuration.abstractions/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.memory/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.configuration.abstractions/index.json 151 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.configuration.abstractions/2.0.1/microsoft.extensions.configuration.abstractions.2.0.1.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.configuration.abstractions/2.0.1/microsoft.extensions.configuration.abstractions.2.0.1.nupkg 28 мс
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.memory/index.json 153 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.memory/2.0.1/microsoft.extensions.caching.memory.2.0.1.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.memory/2.0.1/microsoft.extensions.caching.memory.2.0.1.nupkg 33 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.abstractions/index.json
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.options/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging/index.json 253 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging/2.0.1/microsoft.extensions.logging.2.0.1.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging/2.0.1/microsoft.extensions.logging.2.0.1.nupkg 31 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging.abstractions/index.json
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.options/index.json 150 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.options/2.0.1/microsoft.extensions.options.2.0.1.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.options/2.0.1/microsoft.extensions.options.2.0.1.nupkg 34 мс
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging.abstractions/index.json 163 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging.abstractions/2.0.1/microsoft.extensions.logging.abstractions.2.0.1.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.logging.abstractions/2.0.1/microsoft.extensions.logging.abstractions.2.0.1.nupkg 35 мс
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.abstractions/index.json 317 мс
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.abstractions/2.0.1/microsoft.extensions.caching.abstractions.2.0.1.nupkg
info :   OK https://api.nuget.org/v3-flatcontainer/microsoft.extensions.caching.abstractions/2.0.1/microsoft.extensions.caching.abstractions.2.0.1.nupkg 39 мс
log  : Идет установка Microsoft.Extensions.Caching.Abstractions 2.0.1.
log  : Идет установка Microsoft.Extensions.Logging.Abstractions 2.0.1.
log  : Идет установка Microsoft.Extensions.Options 2.0.1.
log  : Идет установка Microsoft.Extensions.Caching.Memory 2.0.1.
log  : Идет установка Microsoft.Extensions.Logging 2.0.1.
log  : Идет установка Microsoft.Extensions.Configuration.Abstractions 2.0.1.
log  : Идет установка Microsoft.EntityFrameworkCore 2.0.2.
log  : Идет установка Microsoft.EntityFrameworkCore.Relational 2.0.2.
info : Пакет "Npgsql.EntityFrameworkCore.PostgreSQL" совместим со всеми указанными платформами в проекте "C:\Temp\pg\p1\p1.csproj".
info : Ссылка PackageReference для пакета "Npgsql.EntityFrameworkCore.PostgreSQL" версии "2.0.2" добавлена в файл "C:\Temp\pg\p1\p1.csproj".
info : Фиксация восстановления...
info : Запись файла блокировки на диск. Путь: C:\Temp\pg\p1\obj\project.assets.json
log  : Восстановление завершено в 1,87 sec для C:\Temp\pg\p1\p1.csproj.

C:\Temp\pg\p1>dotnet.exe ef dbcontext scaffold "Host=10.2.4.138;Port=5432;Database=postgres;Username=ev;Password=ev" Npgsql.EntityFrameworkCore.PostgreSQL -o Models -c EfDbContext -f
System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(ReadOnlySpan`1 str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(ReadOnlySpan`1 s, NumberStyles style, NumberFormatInfo info)
   at System.Version.TryParseComponent(ReadOnlySpan`1 component, String componentName, Boolean throwOnFailure, Int32& parsedComponent)
   at System.Version.ParseVersion(ReadOnlySpan`1 input, Boolean throwOnFailure)
   at System.Version.Parse(String input)
   at System.Version..ctor(String version)
   at Npgsql.NpgsqlConnector.ProcessServerVersion(String value)
   at Npgsql.NpgsqlConnector.ParseServerMessage(ReadBuffer buf, BackendMessageCode code, Int32 len, DataRowLoadingMode dataRowLoadingMode, Boolean isPrependedMessage)
   at Npgsql.NpgsqlConnector.DoReadMessage(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isPrependedMessage)
   at Npgsql.NpgsqlConnector.ReadMessage(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications)
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.Open(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(DbConnection connection, IEnumerable`1 tables, IEnumerable`1 schemas)
   at Microsoft.EntityFrameworkCore.Scaffolding.Internal.NpgsqlDatabaseModelFactory.Create(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas)
   at Microsoft.EntityFrameworkCore.Scaffolding.Internal.ReverseEngineerScaffolder.ScaffoldModel(String connectionString, IEnumerable`1 tables, IEnumerable`1 schemas, String namespace, String language, String contextDir, String contextName, ModelReverseEngineerOptions modelOptions, ModelCodeGenerationOptions codeOptions)
   at Microsoft.EntityFrameworkCore.Design.Internal.DatabaseOperations.ScaffoldContext(String provider, String connectionString, String outputDir, String outputContextDir, String dbContextClassName, IEnumerable`1 schemas, IEnumerable`1 tables, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContextImpl(String provider, String connectionString, String outputDir, String outputDbContextDir, String dbContextClassName, IEnumerable`1 schemaFilters, IEnumerable`1 tableFilters, Boolean useDataAnnotations, Boolean overwriteFiles, Boolean useDatabaseNames)
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.ScaffoldContext.<>c__DisplayClass0_1.<.ctor>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.<>c__DisplayClass3_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Design.OperationExecutor.OperationBase.Execute(Action action)
Input string was not in a correct format.

C:\Temp\pg\p1>